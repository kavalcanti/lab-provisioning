#!/bin/bash
# Infrastructure Configuration - Non-sensitive values
# This file serves as the single source of truth for infrastructure settings
# Source this file before running Terraform or Ansible operations

# ==============================================================================
# VM SPECIFICATIONS
# ==============================================================================
export TF_VAR_vm_name="testvm"                          # Name for the VM
export TF_VAR_vm_id="200"                               # ID for the VM
export TF_VAR_vm_cores="2"                              # Number of cores
export TF_VAR_vm_sockets="1"                            # Number of sockets
export TF_VAR_vm_memory="2048"                          # Amount of memory in MB
export TF_VAR_vm_disk_size="32"                         # Disk size in GB

# ==============================================================================
# TEMPLATE CONFIGURATION
# ==============================================================================
export TF_VAR_template_id="9000"        # Source Template VM ID to clone from
export TF_VAR_clone_full="true"         # Full clone (true) or linked clone

# ==============================================================================
# STORAGE CONFIGURATION
# ==============================================================================
export TF_VAR_datastore_disk="local-lvm"        # Datastore for VM disk
export TF_VAR_datastore_snippets="local"        # Datastore for cloud-init snippets
export TF_VAR_datastore_cloudinit="local-lvm"   # Datastore for cloud-init drive
export TF_VAR_disk_interface="scsi0"            # Disk controller interface (scsi0,
                                                # sata0, etc)
export TF_VAR_disk_discard="on"                 # Enable TRIM/discard for SSD

# ==============================================================================
# NETWORK CONFIGURATION
# ==============================================================================
export TF_VAR_network_bridge="vmbr0"            # Network bridge to attach VM to
export TF_VAR_network_model="virtio"            # Network adapter model
export TF_VAR_network_mode="dhcp"               # "dhcp" or "static"
export TF_VAR_network_ip=""                     # e.g., "172.20.0.230/24" (if
                                                # static)
export TF_VAR_network_gateway=""                # e.g., "172.20.0.1" (if static)

# ==============================================================================
# CLOUD-INIT CONFIGURATION
# ==============================================================================
export TF_VAR_enable_qemu_agent="true"          # Enable QEMU guest agent
export TF_VAR_package_update="true"             # Update package cache on boot
export TF_VAR_package_upgrade="false"           # Upgrade packages on boot
export TF_VAR_ssh_pwauth="true"                 # Allow SSH password auth
export TF_VAR_disable_root="false"              # Disable root SSH login

# ==============================================================================
# ANSIBLE CONFIGURATION
# ==============================================================================
export ANSIBLE_CONFIG="./ansible/ansible.cfg"   # Path to Ansible configuration
export ANSIBLE_INVENTORY="./ansible/inventory"  # Path to Ansible inventory
export ANSIBLE_SSH_PORT="22"                    # SSH port for Ansible
export ANSIBLE_USER_DEVOPS="devops"             # Non-privileged user for Ansible
export ANSIBLE_USER_ROOT="root"                 # Root user for initial setup

# ==============================================================================
# DOCKER & SOFTWARE VERSIONS
# ==============================================================================
export DOCKER_COMPOSE_VERSION="v2.23.3"         # Docker Compose version

# ==============================================================================
# PROJECT PATHS
# ==============================================================================
export PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
                                                # Project root directory
export TERRAFORM_DIR="${PROJECT_ROOT}/terraform"
                                                # Terraform configuration directory
export ANSIBLE_DIR="${PROJECT_ROOT}/ansible"    # Ansible playbooks and roles
export SCRIPTS_DIR="${PROJECT_ROOT}/scripts"    # Automation scripts directory
export CONFIG_DIR="${PROJECT_ROOT}/config"      # Configuration files directory
