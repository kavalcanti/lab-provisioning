#!/bin/bash
# Infrastructure Configuration - Non-sensitive values
# This file serves as the single source of truth for infrastructure settings
# Source this file before running Terraform or Ansible operations

# ==============================================================================
# VM SPECIFICATIONS
# ==============================================================================
export TF_VAR_vm_name="testvm"
export TF_VAR_vm_id="200"
export TF_VAR_vm_cores="2"
export TF_VAR_vm_sockets="1"
export TF_VAR_vm_memory="2048"  # In MB
export TF_VAR_vm_disk_size="32"  # In GB

# ==============================================================================
# TEMPLATE CONFIGURATION
# ==============================================================================
export TF_VAR_template_id="9000"  # Template VM to clone from
export TF_VAR_clone_full="true"   # Full clone (true) or linked clone (false)

# ==============================================================================
# STORAGE CONFIGURATION
# ==============================================================================
export TF_VAR_datastore_disk="local-lvm"
export TF_VAR_datastore_snippets="local"
export TF_VAR_disk_interface="scsi0"
export TF_VAR_disk_discard="on"

# ==============================================================================
# NETWORK CONFIGURATION
# ==============================================================================
export TF_VAR_network_bridge="vmbr0"
export TF_VAR_network_model="virtio"
export TF_VAR_network_mode="dhcp"  # "dhcp" or "static"
export TF_VAR_network_ip=""        # e.g., "172.20.0.230/24" (if static)
export TF_VAR_network_gateway=""   # e.g., "172.20.0.1" (if static)

# ==============================================================================
# CLOUD-INIT CONFIGURATION
# ==============================================================================
export TF_VAR_enable_qemu_agent="true"
export TF_VAR_package_update="true"
export TF_VAR_package_upgrade="false"
export TF_VAR_ssh_pwauth="true"
export TF_VAR_disable_root="false"

# ==============================================================================
# ANSIBLE CONFIGURATION
# ==============================================================================
export ANSIBLE_CONFIG="./ansible/ansible.cfg"
export ANSIBLE_INVENTORY="./ansible/inventory"
export ANSIBLE_SSH_PORT="22"
export ANSIBLE_USER_DEVOPS="devops"
export ANSIBLE_USER_ROOT="root"

# ==============================================================================
# DOCKER & SOFTWARE VERSIONS
# ==============================================================================
export DOCKER_COMPOSE_VERSION="v2.23.3"

# ==============================================================================
# PROJECT PATHS
# ==============================================================================
export PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
export TERRAFORM_DIR="${PROJECT_ROOT}/terraform"
export ANSIBLE_DIR="${PROJECT_ROOT}/ansible"
export SCRIPTS_DIR="${PROJECT_ROOT}/scripts"
export CONFIG_DIR="${PROJECT_ROOT}/config"
